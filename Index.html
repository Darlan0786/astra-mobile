<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ASTRA Web Edition</title>
<style>
body { margin:0; overflow:hidden; background:#000; }
#ui {
position:absolute;
top:10px;
left:10px;
color:white;
font-family:Arial;
}
#hpBar {
width:200px;
height:15px;
background:#333;
margin-top:5px;
}
#hpFill {
width:100%;
height:100%;
background:#00ffff;
}
</style>
</head>
<body>

<div id="ui">
ASTRA HP
<div id="hpBar"><div id="hpFill"></div></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>

<script>
let scene = new THREE.Scene();
scene.fog = new THREE.Fog(0x000000, 10, 50);

let camera = new THREE.PerspectiveCamera(70, window.innerWidth/window.innerHeight, 0.1, 1000);
camera.position.set(0,3,6);

let renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.shadowMap.enabled = true;
document.body.appendChild(renderer.domElement);

let light = new THREE.PointLight(0x00ffff, 2, 50);
light.position.set(5,10,5);
scene.add(light);

let ambient = new THREE.AmbientLight(0x222222);
scene.add(ambient);

let floorGeo = new THREE.PlaneGeometry(50,50);
let floorMat = new THREE.MeshStandardMaterial({color:0x111111, roughness:0.8});
let floor = new THREE.Mesh(floorGeo, floorMat);
floor.rotation.x = -Math.PI/2;
scene.add(floor);

let playerGeo = new THREE.ConeGeometry(0.5,1.5,6);
let playerMat = new THREE.MeshStandardMaterial({
color:0x00ffff,
emissive:0x002222,
metalness:0.5,
roughness:0.2
});
let player = new THREE.Mesh(playerGeo, playerMat);
player.position.y = 0.75;
scene.add(player);

let enemyGeo = new THREE.TorusKnotGeometry(0.6,0.2,100,16);
let enemyMat = new THREE.MeshStandardMaterial({
color:0xff0033,
emissive:0x330000,
metalness:0.7,
roughness:0.3
});
let enemy = new THREE.Mesh(enemyGeo, enemyMat);
enemy.position.set(3,1,0);
scene.add(enemy);

let hp = 100;

function updateHP(){
document.getElementById("hpFill").style.width = hp + "%";
}

function attack(){
let dist = player.position.distanceTo(enemy.position);
if(dist < 2){
hp -= 5;
updateHP();
enemy.material.emissive.set(0xffffff);
setTimeout(()=>enemy.material.emissive.set(0x330000),150);
}
}

window.addEventListener("touchstart", attack);
window.addEventListener("click", attack);

window.addEventListener("touchmove", e=>{
let x = (e.touches[0].clientX/window.innerWidth)*10-5;
let z = (e.touches[0].clientY/window.innerHeight)*10-5;
player.position.x = x;
player.position.z = z;
});

window.addEventListener("mousemove", e=>{
let x = (e.clientX/window.innerWidth)*10-5;
let z = (e.clientY/window.innerHeight)*10-5;
player.position.x = x;
player.position.z = z;
});

function animate(){
requestAnimationFrame(animate);
enemy.rotation.x += 0.01;
enemy.rotation.y += 0.01;
light.position.x = Math.sin(Date.now()*0.001)*5;
renderer.render(scene, camera);
}
animate();
</script>

</body>
</html>
